<div class="layout">
  <aside class="sidebar">
    <div class="profile">
      <img src="/settings/avatar.png" alt="{{ name }}" class="avatar">
      <div class="profile-info">
        <h1 class="name">{{ name }}</h1>
        <p class="role">{{ title }}</p>
        <p class="location">{{ location }}</p>
      </div>
    </div>

    <div class="contact-info">
      <div class="contact-links">
        <a [href]="'tel:' + phone" class="contact-link">{{ phone }}</a>
        <a [href]="'mailto:' + email" class="contact-link">{{ email }}</a>
        <a [href]="linkedInUrl" target="_blank" class="contact-link">LinkedIn Profile</a>
      </div>
    </div>

    <nav class="navigation">
      <button *ngFor="let s of sections" (click)="scrollTo(s.id)" class="nav-link">
        {{ s.label }}
      </button>
    </nav>

    <!-- Chatbot -->
    <div class="chatbot-section">
      <div class="chatbot" [class.open]="chatOpen">
        <div class="chatbot-header" (click)="toggleChat()">
          <span class="chatbot-title">{{ chatbotTitle }}</span>
          <span class="chatbot-toggle">{{ chatOpen ? 'Ã—' : 'ðŸ’¬' }}</span>
        </div>
        <div class="chatbot-content" *ngIf="chatOpen">
          <div class="messages" #messagesContainer>
            <div *ngFor="let msg of messages" class="message" [class.user]="msg.isUser">
              <div class="message-content">{{ msg.text }}</div>
            </div>
            <div *ngIf="isLoading" class="message loading">
              <div class="typing-indicator">
                <span></span>
                <span></span>
                <span></span>
              </div>
            </div>
          </div>
          <div class="input-area">
            <input
              type="text"
              [(ngModel)]="currentMessage"
              (keyup.enter)="sendMessage()"
              [placeholder]="chatbotPlaceholder"
              class="message-input"
            >
            <button (click)="sendMessage()" class="send-button">{{ chatbotSendButton }}</button>
          </div>
        </div>
      </div>
    </div>
  </aside>

  <div class="content-wrapper">
    <div class="language-selector" *ngIf="languages.length > 0">
      <div class="lang-option" *ngFor="let lang of languages" (click)="changeLanguage(lang.code)" [class.active]="selectedLang === lang.code">
        <img [src]="'https://flagsapi.com/' + lang.code + '/flat/32.png'" [alt]="lang.name">
      </div>
    </div>
    <main class="main">
      <section id="about" class="section">
        <h2 class="section-title">{{ sections[0].label }}</h2>
        <div class="content-block">
          <p class="intro">{{ aboutShort }}</p>
          <p>{{ aboutLong }}</p>
        </div>
      </section>

      <section id="highlights" class="section">
        <h2 class="section-title">{{ sections[1].label }}</h2>
        <div class="highlights-grid">
          <div *ngFor="let h of highlights" class="highlight-card">
            <h3 class="highlight-title">{{ h.title }}</h3>
            <span *ngIf="h.year" class="highlight-year">{{ h.year }}</span>
            <p class="highlight-description">{{ h.description }}</p>
          </div>
        </div>
      </section>

      <section id="experience" class="section">
        <h2 class="section-title">{{ sections[2].label }}</h2>
        <div class="experience-grid">
          <div *ngFor="let job of experience" class="experience-card">
            <h3 class="job-title">{{ job.role }}</h3>
            <p class="company">{{ job.company }}</p>
            <p class="period">{{ job.period }} â€¢ {{ job.location }}</p>
            <ul class="achievements">
              <li *ngFor="let bullet of job.bullets">{{ bullet }}</li>
            </ul>
          </div>
        </div>
      </section>


    </main>

    <div class="tall-avatar">
      <img src="/settings/tall_avatar.png" alt="{{ name }}" class="tall-avatar-img">
    </div>
  </div>
</div>
